import{aW as K,g as q,a4 as U,S as L,u as Z,aX as O,X as m,C as _,v as l,a9 as g,aY as k,q as J,y as Q,H as ee,K as u,o as W,aZ as D,V as A,a6 as te,a_ as se,a$ as C,b0 as I,b1 as M,b2 as ie,b3 as re,al as j,b4 as B,b5 as ne,b6 as H,b7 as ae,G as he,$ as N,w as E,b8 as fe,A as oe,b9 as P,ba as de,a7 as _e,bb as le,bc as ce,bd as F,x as ue,D as X,a8 as pe,a0 as ge,ac as S,B as b,be as ve,_ as be,bf as ye,P as me,bg as Ee,bh as V,bi as $,bj as Te,c as Re,ad as we,F as De,ab as Ae,p as Ne}from"./utils.DpvoMRHq.js";function Fe(i){let e=0,t=L(0),r;return()=>{K()&&(q(t),U(()=>(e===0&&(r=Z(()=>i(()=>O(t)))),e+=1,()=>{m(()=>{e-=1,e===0&&(r?.(),r=void 0,O(t))})})))}}var Se=_e|le;function xe(i,e,t){new Ye(i,e,t)}class Ye{parent;is_pending=!1;#t;#p=l?_:null;#n;#o;#s;#i=null;#e=null;#r=null;#a=null;#d=0;#f=0;#_=!1;#l=new Set;#c=new Set;#h=null;#b=Fe(()=>(this.#h=L(this.#d),()=>{this.#h=null}));constructor(e,t,r){this.#t=e,this.#n=t,this.#o=n=>{var s=g;s.b=this,s.f|=k,r(n)},this.parent=g.b,this.#s=J(()=>{if(l){const n=this.#p;Q(),n.data===ee?this.#m():this.#y()}else this.#g()},Se),l&&(this.#t=_)}#y(){try{this.#i=u(()=>this.#o(this.#t))}catch(e){this.error(e)}}#m(){const e=this.#n.pending;e&&(this.is_pending=!0,this.#e=u(()=>e(this.#t)),m(()=>{var t=this.#a=document.createDocumentFragment(),r=W();t.append(r),this.#i=this.#u(()=>(D.ensure(),u(()=>this.#o(r)))),this.#f===0&&(this.#t.before(t),this.#a=null,A(this.#e,()=>{this.#e=null}),this.is_pending=!1)}))}#g(){try{if(this.is_pending=this.has_pending_snippet(),this.#f=0,this.#d=0,this.#i=u(()=>{this.#o(this.#t)}),this.#f>0){var e=this.#a=document.createDocumentFragment();te(this.#i,e);const t=this.#n.pending;this.#e=u(()=>t(this.#t))}else this.is_pending=!1}catch(t){this.error(t)}}defer_effect(e){se(e,this.#l,this.#c)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#n.pending}#u(e){var t=g,r=re,n=j;C(this.#s),I(this.#s),M(this.#s.ctx);try{return e()}catch(s){return ie(s),null}finally{C(t),I(r),M(n)}}#v(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#v(e);return}if(this.#f+=e,this.#f===0){this.is_pending=!1;for(const t of this.#l)B(t,ne),H(t);for(const t of this.#c)B(t,ae),H(t);this.#l.clear(),this.#c.clear(),this.#e&&A(this.#e,()=>{this.#e=null}),this.#a&&(this.#t.before(this.#a),this.#a=null)}}update_pending_count(e){this.#v(e),this.#d+=e,!(!this.#h||this.#_)&&(this.#_=!0,m(()=>{this.#_=!1,this.#h&&he(this.#h,this.#d)}))}get_effect_pending(){return this.#b(),q(this.#h)}error(e){var t=this.#n.onerror;let r=this.#n.failed;if(!t&&!r)throw e;this.#i&&(N(this.#i),this.#i=null),this.#e&&(N(this.#e),this.#e=null),this.#r&&(N(this.#r),this.#r=null),l&&(E(this.#p),fe(),E(oe()));var n=!1,s=!1;const h=()=>{if(n){ce();return}n=!0,s&&de(),this.#r!==null&&A(this.#r,()=>{this.#r=null}),this.#u(()=>{D.ensure(),this.#g()})};m(()=>{try{s=!0,t?.(e,h),s=!1}catch(a){P(a,this.#s&&this.#s.parent)}r&&(this.#r=this.#u(()=>{D.ensure();try{return u(()=>{var a=g;a.b=this,a.f|=k,r(this.#t,()=>e,()=>h)})}catch(a){return P(a,this.#s.parent),null}}))})}}function Ce(i,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(i.__t??=i.nodeValue)&&(i.__t=t,i.nodeValue=t+"")}function Oe(i,e){return z(i,e)}function Ie(i,e){F(),e.intro=e.intro??!1;const t=e.target,r=l,n=_;try{for(var s=ue(t);s&&(s.nodeType!==X||s.data!==pe);)s=ge(s);if(!s)throw S;b(!0),E(s);const h=z(i,{...e,anchor:s});return b(!1),h}catch(h){if(h instanceof Error&&h.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw h;return h!==S&&console.warn("Failed to hydrate: ",h),e.recover===!1&&ve(),F(),be(t),b(!1),Oe(i,e)}finally{b(r),E(n)}}const y=new Map;function z(i,{target:e,anchor:t,props:r={},events:n,context:s,intro:h=!0}){F();var a=void 0,G=ye(()=>{var v=t??e.appendChild(W());xe(v,{pending:()=>{}},f=>{Re({});var o=j;if(s&&(o.c=s),n&&(r.$$events=n),l&&we(f,null),a=i(f,r)||{},l&&(g.nodes.end=_,_===null||_.nodeType!==X||_.data!==De))throw Ae(),S;Ne()});var T=new Set,R=f=>{for(var o=0;o<f.length;o++){var d=f[o];if(!T.has(d)){T.add(d);var p=Te(d);for(const w of[e,document]){var c=y.get(w);c===void 0&&(c=new Map,y.set(w,c));var Y=c.get(d);Y===void 0?(w.addEventListener(d,$,{passive:p}),c.set(d,1)):c.set(d,Y+1)}}}};return R(me(Ee)),V.add(R),()=>{for(var f of T)for(const p of[e,document]){var o=y.get(p),d=o.get(f);--d==0?(p.removeEventListener(f,$),o.delete(f),o.size===0&&y.delete(p)):o.set(f,d)}V.delete(R),v!==t&&v.parentNode?.removeChild(v)}});return x.set(a,G),a}let x=new WeakMap;function Me(i,e){const t=x.get(i);return t?(x.delete(i),t(e)):Promise.resolve()}export{Ie as h,Oe as m,Ce as s,Me as u};
