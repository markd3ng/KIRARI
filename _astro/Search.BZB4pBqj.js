import"./disclose-version.DsnmJJEf.js";import{i as Y}from"./lifecycle.h2Exh1C9.js";import{o as $,r as q,a as A}from"./props.Bf_PjiMt.js";import{a3 as L,a4 as C,g as e,b as P,c as G,j as u,h as z,e as H,f as l,i as f,r as h,m,t as J,u as k}from"./utils.A_Fv7MTT.js";import{s as K}from"./render.xAf_YryO.js";import{u as S,e as N,i as O}from"./url-utils.CzksKswA.js";import{I as B,h as Q}from"./Icon.DAhLQmL9.js";import{b as U}from"./input.CBiwivqo.js";import"./zh_TW.BghCmbPg.js";import{i as v}from"./icons.DVG7b1Jf.js";import{a as T}from"./functions.CccWKVqC.js";const X={},Z=24,D=24,g={icons:X,width:Z,height:D};var ee=z(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),te=z(`<div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1wah7ro"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1wah7ro"/></div> <!></div>`);function ue(R,F){H(F,!1),v.icons.search&&T("material-symbols:search",{body:v.icons.search.body,width:v.width,height:v.height}),g.icons["chevron-right"]&&T("fa6-solid:chevron-right",{body:g.icons["chevron-right"].body,width:g.width,height:g.height});let r=m(""),n=m(""),c=m([]),b=!1,o=m(!1);const ae=[{url:S("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:S("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],M=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},w=(i,a)=>{const t=document.getElementById("search-panel");!t||!a||(i?t.classList.remove("float-panel-closed"):t.classList.add("float-panel-closed"))},d=async(i,a)=>{if(!i){w(!1,a),l(c,[]);return}if(e(o))try{let t=[];if(b&&window.pagefind){const s=await window.pagefind.search(i);t=await Promise.all(s.results.map(p=>p.data()))}else t=[],console.error("Pagefind is not available in production environment.");l(c,t),w(e(c).length>0,a)}catch(t){console.error("Search error:",t),l(c,[]),w(!1,a)}};$(()=>{const i=()=>{l(o,!0),b=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",b),e(r)&&d(e(r),!0),e(n)&&d(e(n),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),i()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),i()}),setTimeout(()=>{e(o)||(console.log("Fallback: Initializing search after timeout."),i())},2e3);const a=document.getElementById("search-input-desktop"),t=document.getElementById("search-switch");a&&(a.addEventListener("input",s=>{l(r,s.target.value)}),a.addEventListener("focus",()=>{d(e(r),!0)})),t&&(t.onclick=M)}),L(()=>(e(o),e(r)),()=>{e(o)&&e(r)&&(async()=>await d(e(r),!0))()}),L(()=>(e(o),e(n)),()=>{e(o)&&e(n)&&(async()=>await d(e(n),!1))()}),C(),Y();var y=te(),x=f(y),_=f(x);B(_,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var I=u(_,2);q(I),h(x);var j=u(x,2);N(j,1,()=>e(c),O,(i,a)=>{var t=ee(),s=f(t),p=f(s,!0),V=u(p);B(V,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),h(s);var E=u(s,2),W=f(E);Q(W,()=>(e(a),k(()=>e(a).excerpt))),h(E),h(t),J(()=>{A(t,"href",(e(a),k(()=>e(a).url))),K(p,(e(a),k(()=>e(a).meta.title)))}),P(i,t)}),h(y),U(I,()=>e(n),i=>l(n,i)),P(R,y),G()}export{ue as default};
