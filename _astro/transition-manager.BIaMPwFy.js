const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.modern.QyIekdFY.js","_astro/Swup.modern.DR8tGCtn.js"])))=>i.map(i=>d[i]);
import{_ as s}from"./preload-helper.CVfkMyKi.js";const e=typeof document<"u"&&"startViewTransition"in document;class r{listeners=new Map;swupInstance=null;initialized=!1;constructor(){["transition:start","transition:before-swap","transition:after-swap","transition:end"].forEach(n=>{this.listeners.set(n,new Set)})}on(t,n){const i=this.listeners.get(t);return i&&i.add(n),()=>{i?.delete(n)}}emit(t,n){const i=this.listeners.get(t);i&&i.forEach(o=>{try{o(n)}catch(a){console.error(`Error in transition event handler for ${t}:`,a)}})}async init(){this.initialized||(this.initialized=!0,e?(console.log("[TransitionManager] Using native View Transitions API"),this.setupAstroClientRouter()):(console.log("[TransitionManager] View Transitions not supported, loading Swup fallback"),await this.setupSwupFallback()))}setupAstroClientRouter(){document.addEventListener("astro:before-preparation",t=>{const n={from:t.from?.href,to:t.to?.href,direction:t.direction};this.emit("transition:start",n)}),document.addEventListener("astro:before-swap",t=>{const n={from:t.from?.href,to:t.to?.href,direction:t.direction};this.emit("transition:before-swap",n)}),document.addEventListener("astro:after-swap",()=>{const t={to:window.location.href};this.emit("transition:after-swap",t)}),document.addEventListener("astro:page-load",()=>{const t={to:window.location.href};this.emit("transition:end",t)})}async setupSwupFallback(){try{const[{default:t},{default:n}]=await Promise.all([s(()=>import("./Swup.modern.DR8tGCtn.js"),[]),s(()=>import("./index.modern.QyIekdFY.js"),__vite__mapDeps([0,1]))]);this.swupInstance=new t({animationSelector:'[class*="transition-swup-"]',containers:["main","#toc"],cache:!0,plugins:[new n]}),this.swupInstance.hooks.on("visit:start",i=>{this.emit("transition:start",{from:i.from?.url,to:i.to?.url})}),this.swupInstance.hooks.on("content:replace",()=>{this.emit("transition:before-swap",{to:window.location.href})}),this.swupInstance.hooks.on("page:view",()=>{this.emit("transition:after-swap",{to:window.location.href})}),this.swupInstance.hooks.on("visit:end",i=>{this.emit("transition:end",{to:i.to?.url})}),window.swup=this.swupInstance,document.dispatchEvent(new CustomEvent("swup:enable")),console.log("[TransitionManager] Swup fallback initialized")}catch(t){console.error("[TransitionManager] Failed to load Swup fallback:",t)}}isUsingViewTransitions(){return e}isUsingSwup(){return!e&&this.swupInstance!==null}getSwupInstance(){return this.swupInstance}}const u=new r;export{e as s,u as t};
